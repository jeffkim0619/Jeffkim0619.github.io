import{_ as e,A as a,r as s,b as l,o as t,c as i,d as r,a as n,e as o,n as c,w as u,v as d,t as v,h as p,p as m,i as f}from"./index.635b751b.js";import{a as b}from"./formatDate.76398d55.js";import{t as g}from"./getDataList.cf867ebf.js";import{T as x,d as k}from"./TransactionTransfer.02261aee.js";import{i as h}from"./index.06a5fa27.js";import"./bignumber.361c60eb.js";import"./index.aae502b5.js";const T={components:{TransactionTransfer:x},setup(){const e=a(),{showDialog1:l,closeDialog1:t}=k(),i=s(""),r=s("");""!==e.params.contractAddress&&null!==e.params.contractAddress&&(r.value=e.params.contractAddress);const n=s(""),o=s(!1),c=s(!1),u=s(""),d=s(!1),v=s(!1),m=s(""),f=s(""),x=s(""),T=s(""),y=s(""),C=s(""),w=s(""),A=s(""),E=s(""),K=s(""),V=s(!1),j=s(!1),I=s(!1),D=s(!1),M=s(!1),P=e=>{switch(e){case 1:m.value="",f.value="",x.value="",T.value="",y.value="",C.value="",w.value="",A.value="",E.value="",K.value="",V.value=!1,j.value=!1,I.value=!1,D.value=!1;break;case 2:u.value="",d.value=!1}},{getTokenInfo:N,getTokenTimeLockInfo:O,getTokenTimeLockBalance:R}=g(),L=async()=>{if(!h(r.value))return o.value=!0,i.value=p.errmsg.CHECKCONTRACT,void $(0);try{P(1),o.value=!1,c.value=!1,V.value=!0,A.value=await O(r.value),E.value=await R(r.value),K.value=await N(A.value.data.tokenAddress),n.value=r.value,m.value=1e3*A.value.data.releaseTime,f.value="https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880",x.value=K.value.data.name,T.value=b(E.value.data),C.value=A.value.data.beneficiary,w.value=S(m.value),M.value=U(I.value,D.value),V.value=!1,j.value=!0}catch(e){V.value=!1,o.value=!0,i.value=p.errmsg.CHECKCONTRACT,$(0)}},S=e=>{let a=Date.now(),s=Math.abs(e-a);return e>a?(I.value=!1,`락 만료까지 ${_(s)} 전`):e<a?(I.value=!0,`락 만료 시간에서 ${_(s)} 지남`):void 0},_=e=>e>=864e5?H(e)+"일 "+z(e)+"시간 "+B(e)+"분":e>=36e5?z(e)+"시간 "+B(e)+"분":B(e)+"분",H=e=>Math.floor(e/864e5),z=e=>Math.floor(e%864e5/36e5),B=e=>Math.floor(e%864e5%36e5/6e4);e.params.isAutoSearch&&L();const U=(e,a)=>!0===e&&!1===a||(!1!==e||!0!==a)&&((!1!==e||!1!==a)&&((!0!==e||!0!==a)&&void 0)),$=e=>{switch(e){case 0:v.value=!1,c.value=!0;break;case 1:c.value=!1,v.value=!0}},Y=s({});return{closed:e=>{t(),e.state&&P(2)},errorMessage:i,contractAddress:r,isContractAddress:o,isContractAddressError:c,isloading:V,isVisible:j,isTransPossible:M,lockExpireTime:m,tokenImage:f,tokenName:x,balanceTokenAmount:T,distributionStatus:y,distributionAddress:C,isExpire:I,getContractInfo:L,printExpireTime:w,onRefresh:()=>{P(1),L()},privateKey:u,isPrivateKey:d,isPrivateKeyError:v,onSubmit:()=>!1===j.value||n.value!==r.value?(o.value=!0,d.value=!1,window.scrollTo(0,0),i.value=p.errmsg.CHECKCONTRACT,void $(0)):64!==u.value.length||""===u.value?(o.value=!1,d.value=!0,i.value=p.errmsg.CHECKPRIVATEKEY,void $(1)):(o.value=!1,c.value=!1,d.value=!1,v.value=!1,Y.value={actionNm:p.dialog.TOKENTIMELOCK,contractAddress:r.value,tokenName:x.value,privateKey:u.value},l("release",Y),void P(2))}}},y=e=>(m("data-v-0d1800d3"),e=e(),f(),e),C={class:"card"},w={class:"card-container purple-container overflow-hidden"},A={class:"flex h-6rem"},E=y((()=>n("div",{class:"flex-initial flex w-1 align-items-center justify-content-start ml-5"},[n("p",{class:"text-xl text-black-alpha-80 font-bold"},"계약 주소")],-1))),K={class:"flex-1 flex align-items-center text-blockchain font-medium text-black-alpha-60 px-1 py-3 border-round p-inputgroup inputwrapper-max-width"},V={class:"w-12"},j={class:"err-msg-style"},I={class:"surface-200 mt-5 h-12rem mx-5 py-2 align-content-center"},D={class:"grid justify-content-center"},M={class:"grid mt-2 align-content-center align-items-center"},P={class:"col-3 text-xl font-bold text-black-alpha-80 text-center pl-8 mr-6"},N={class:"py-4"},O=["src"],R={class:"mb-3"},L={class:"col-3 text-xl font-bold text-black-alpha-80 text-right pl-8"},S={key:0,class:"pi pi-spin pi-spinner mt-6",style:{"font-size":"4rem"}},_={class:"pi pi-arrow-circle-right",style:{"font-size":"4rem"}},H={class:"pi pi-lock",style:{"font-size":"4rem"}},z={class:"col text-xl font-bold text-black-alpha-80 text-center pl-8"},B={class:"py-3"},U={class:"py-3"},$={class:"field align-items-start justify-content-start ml-2 px-4 py-3 mt-5"},Y=y((()=>n("p",{class:"text-xl text-black-alpha-80 font-bold"}," 실행할 주소 비공개키 ",-1))),q={class:"font-medium text-black-alpha-60 inputwrapper-max-width"},F={class:"err-msg-style"},G={class:"flex-1 flex align-items-center justify-content-center py-3 h-6rem"};var J=e(T,[["render",function(e,a,s,p,m,f){const b=l("InputText"),g=l("Button"),x=l("Password"),k=l("TransactionTransfer");return t(),i("div",null,[r(" DistributionOfContractTokens "),n("div",C,[n("div",w,[r(" 1 "),n("div",A,[E,n("div",K,[n("div",V,[o(b,{modelValue:p.contractAddress,"onUpdate:modelValue":a[0]||(a[0]=e=>p.contractAddress=e),class:c(["w-12",[{"p-invalid":p.isContractAddress}]])},null,8,["modelValue","class"]),n("div",j,[u(n("span",null,v(p.errorMessage),513),[[d,p.isContractAddressError]])])]),o(g,{icon:"pi pi-search",class:"bg-indigolight",onClick:p.getContractInfo},null,8,["onClick"])])]),r(" 1 "),r(" 2 "),n("div",I,[n("div",D,[u(n("span",{class:"col-11 mt-2 text-lg"},v(p.printExpireTime),513),[[d,p.isVisible]]),u(n("i",{class:"pi pi-sync cursor-pointer col-fixed mt-2",onClick:a[1]||(a[1]=(...e)=>p.onRefresh&&p.onRefresh(...e))},null,512),[[d,p.isVisible]])]),n("div",M,[n("div",P,[n("div",N,[u(n("img",{src:p.tokenImage,class:"mr-2",style:{width:"20px",height:"20px"}},null,8,O),[[d,""!==p.tokenImage&&null!==p.tokenImage]]),n("span",null,v(p.tokenName),1)]),n("div",R,v(p.balanceTokenAmount),1)]),n("div",L,[p.isloading?(t(),i("i",S)):r("v-if",!0),u(n("i",_,null,512),[[d,p.isVisible&&p.isExpire]]),u(n("i",H,null,512),[[d,p.isVisible&&!p.isExpire]])]),n("div",z,[u(n("div",B,"받는 주소",512),[[d,p.isVisible]]),n("div",U,v(p.distributionAddress),1)])])]),r(" 2 "),r(" 3 "),n("div",$,[Y,n("div",q,[o(x,{modelValue:p.privateKey,"onUpdate:modelValue":a[2]||(a[2]=e=>p.privateKey=e),class:c(["w-full",[{"p-invalid":p.isPrivateKey}]]),feedback:!1,placeholder:"비공개키 입력할때는 보안에 주의하세요",inputStyle:"width: 100%",toggleMask:""},null,8,["modelValue","class"])]),n("div",F,[u(n("span",null,v(p.errorMessage),513),[[d,p.isPrivateKeyError]])])]),r(" 3 "),r(" 4 "),n("div",G,[u(o(g,{label:"전송",class:"px-7",onClick:p.onSubmit},null,8,["onClick"]),[[d,!0===p.isVisible&&!0===p.isTransPossible]]),u(o(g,{label:"전송불가",class:"px-7 p-button-secondary",disabled:"disabled"},null,512),[[d,!0===p.isVisible&&!1===p.isTransPossible]])]),r(" 4 ")])]),r(" DistributionOfContractTokens "),o(k,{onDialogAction:p.closed},null,8,["onDialogAction"])])}],["__scopeId","data-v-0d1800d3"],["__file","D:/2022/6.profile/jeffkim22/src/views/ethereum/tokenTimeLock/DistributionOfContractTokens.vue"]]);export{J as default};
