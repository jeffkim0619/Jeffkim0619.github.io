import{_ as e,r as l,b as a,o as t,c as n,a as s,d as i,e as o,n as r,t as d,g as c,w as u,v,f as p,q as f,h as m,p as x,i as b}from"./index.43edff7c.js";import{s as g,i as y}from"./formatDate.17fed28e.js";import{T as h,d as k}from"./TransactionTransfer.2b6d0a58.js";import{t as w}from"./getDataList.8b85a263.js";import{M as A}from"./MultiTransListAdd.55110a47.js";import{C as T}from"./CopyAddress.074d38fd.js";import{B as C}from"./bignumber.361c60eb.js";import{f as L,a as j}from"./index.01bab893.js";import"./NumberInput.c65e1ba8.js";import"./index.fcfdd8d6.js";const S={components:{MultiTransListAdd:A,TransactionTransfer:h,CopyAddress:T},setup(){const e=l([]),a=l({}),t=l(""),n=l(""),s=l(!1),i=l(!1),o=l(!1),r=l(!1),d=l(!1),c=l(!1),u=l(!0),v=l(),p=l(""),f=l(""),x=l(),b=l(""),h=l(!1),A=l(!1),T=l({}),S=l(""),V=l(!1),{getContractList:M,contractList:D,getMultitransferOwner:O,getTokenList:P,tokenList:B,getBalanceMultiTransfer:E}=w();M(1),P(1);const{showDialog1:_,closeDialog1:I,showDialog3:K,closeDialog3:N}=k(),U=async()=>{d.value=!1,i.value=!0;let e=await E(t.value,p.value),l=await L(e.data.balance);x.value=new C(l).toFormat();let a=await L(e.data.allowance);f.value=new C(a).toFormat(),i.value=!1,o.value=!0};return{datas:e,data:a,sumAmount:g,addList:()=>{K()},addDataList:l=>{e.value=[...e.value,...l.value],N()},contractList:D,getOwnerAddress:async()=>{r.value=!1,s.value=!0;let e=await O(t.value);n.value=e.data,s.value=!1,u.value=!1,""!==p.value&&U()},contractSelect:t,isSeleted:r,loading1:c,selectedProduct1:v,deleteProduct:l=>{a.value=l,e.value=e.value.filter((e=>e.count!==a.value.count)),a.value={}},isTokenSeleted:d,isPrivatekey:h,onRefresh:()=>{U()},tokenSelect:p,tokenList:B,getTokenBalance:U,doMultiTransfer:()=>{if(""===t.value||null===t.value)return window.scrollTo(0,0),r.value=!0,h.value=!1,void(A.value=!1);if(""===p.value||null===p.value)return window.scrollTo(0,200),r.value=!1,d.value=!0,h.value=!1,A.value=!1,void(V.value=!1);if(0===e.value.length)return d.value=!1,r.value=!1,h.value=!1,A.value=!1,void(V.value=!1);if(y(e.value,parseInt(f.value)))return A.value=!0,V.value=!1,h.value=!1,d.value=!1,r.value=!1,void(S.value=m.errmsg.NOALLOWANCE);if(y(e.value,parseInt(x.value)))return V.value=!0,A.value=!1,h.value=!1,d.value=!1,r.value=!1,void(S.value=m.errmsg.LESSTOKEN);if("0.0"===f.value||0===parseInt(f.value))return A.value=!0,V.value=!1,h.value=!1,d.value=!1,r.value=!1,void(S.value=m.errmsg.NOALLOWANCE);if(64!==b.value.length||""===b.value||null===b.value)return h.value=!0,A.value=!1,V.value=!1,d.value=!1,r.value=!1,void(S.value=m.errmsg.CHECKPRIVATEKEY);let l=[],a={};for(let t=0;t<e.value.length;t++){let s=e.value[t].amount.replace(/(,)/g,""),i=j(s);a={tokenAddress:p.value,fromAddress:n.value,toAddress:e.value[t].address,amount:i.toString()},l.push(a)}T.value={actionNm:"멀티전송",contractAddress:t.value,ownerPrivateKey:b.value,transferVOList:l,totalAmount:g(e.value)},h.value=!1,d.value=!1,r.value=!1,A.value=!1,V.value=!1,_("multiTransferFrom",T)},ownerAddress:n,isloading:s,isTokenloading:i,isVisible:o,isContractSeleted:u,tokenBalance:x,tokenAllowance:f,privateKey:b,closed:()=>{I()},errorMessage:S,isEmptyAllowance:A,isLessBalance:V,copyToClipBoard:e=>{let l=document.createElement("textarea");document.body.appendChild(l),l.value=e,l.select(),document.execCommand("copy"),document.body.removeChild(l)}}}},V=e=>(x("data-v-37fedb72"),e=e(),b(),e),M={class:"card"},D={class:"card-container purple-container overflow-hidden"},O={class:"flex h-6rem"},P=V((()=>s("div",{class:"flex w-1 align-items-center justify-content-start ml-5"},[s("span",{class:"text-xl text-black-alpha-80 font-bold"},"계약")],-1))),B={class:"flex justify-content-center align-items-center w-5 font-medium text-black-alpha-60"},E={class:"flex h-6rem"},_=V((()=>s("div",{class:"flex w-1 align-items-center justify-content-start ml-5"},[s("span",{class:"text-xl text-black-alpha-80 font-bold"},"Owner")],-1))),I={class:"flex justify-content-start align-items-center w-4"},K={key:0},N=[V((()=>s("i",{class:"pi pi-spin pi-spinner"},null,-1)))],U={key:1},R={class:"text-xl text-black-alpha-60 font-medium"},F={class:"card"},H={class:"card-container purple-container overflow-hidden"},W=V((()=>s("span",{class:"text-xl text-black-alpha-80 font-bold"}," 토큰 멀티 전송 ",-1))),q={class:"field"},Y={class:"flex h-6rem"},z=V((()=>s("div",{class:"flex w-1 align-items-center justify-content-start ml-5"},[s("span",{class:"text-xl text-black-alpha-80 font-bold"},"토큰")],-1))),G={class:"flex justify-content-center align-items-center w-4 font-medium text-black-alpha-60"},J={class:"flex h-6rem"},Q=V((()=>s("div",{class:"flex w-1 align-items-center justify-content-start ml-5"},[s("span",{class:"text-xl text-black-alpha-80 font-bold"},"토큰잔액")],-1))),X={class:"flex justify-content-start align-items-center w-4"},Z={key:0},$=[V((()=>s("i",{class:"pi pi-spin pi-spinner"},null,-1)))],ee={key:1},le={key:0,class:"err-msg-style flex align-items-end ml-5"},ae={class:"flex h-6rem"},te=V((()=>s("div",{class:"flex w-1 align-items-center justify-content-start ml-5"},[s("span",{class:"text-xl text-black-alpha-80 font-bold"},"Allowance")],-1))),ne={class:"flex justify-content-start align-items-center w-4"},se={key:0},ie=[V((()=>s("i",{class:"pi pi-spin pi-spinner"},null,-1)))],oe={key:1},re={key:1,class:"err-msg-style flex align-items-end ml-5"},de={class:"flex h-6rem"},ce=V((()=>s("div",{class:"flex-initial flex w-2 align-items-center justify-content-start font-bold text-black ml-5 border-round"},[s("p",{class:"text-2xl"},"전송 리스트")],-1))),ue=V((()=>s("div",{class:"flex-1 flex align-items-center justify-content-center m-2 px-3 py-1 border-round"},null,-1))),ve={class:"flex-1 flex align-items-center justify-content-end font-bold px-1 py-3 border-round"},pe={class:"flex h-full"},fe={class:"col-12 align-items-center justify-content-center m-2 px-3 py-1 border-round"},me=p(" No datas found."),xe=V((()=>s("br",null,null,-1))),be=V((()=>s("br",null,null,-1))),ge=V((()=>s("br",null,null,-1))),ye=V((()=>s("br",null,null,-1))),he=V((()=>s("br",null,null,-1))),ke=V((()=>s("br",null,null,-1))),we=V((()=>s("br",null,null,-1))),Ae=V((()=>s("br",null,null,-1))),Te=V((()=>s("br",null,null,-1))),Ce=V((()=>s("br",null,null,-1))),Le=V((()=>s("br",null,null,-1))),je=V((()=>s("br",null,null,-1))),Se=V((()=>s("br",null,null,-1))),Ve=V((()=>s("br",null,null,-1))),Me=V((()=>s("br",null,null,-1))),De=V((()=>s("br",null,null,-1))),Oe=V((()=>s("br",null,null,-1))),Pe=p(" Loading customers data. Please wait. "),Be={class:"flex h-3rem"},Ee=V((()=>s("div",{class:"flex w-7 justify-content-end align-items-center"},[s("span",{class:"text-2xl font-bold text-black-alpha-80"},"총 수량")],-1))),_e={class:"flex w-5 justify-content-end align-items-center"},Ie={class:"text-2xl font-bold text-black-alpha-80"},Ke={class:"field align-items-start justify-content-start ml-2 py-3"},Ne=V((()=>s("p",{class:"text-xl text-black-alpha-80 font-bold"}," Owner 비공개키 ",-1))),Ue={class:"font-medium text-black-alpha-60 inputwrapper-max-width"},Re={class:"err-msg-style"},Fe={class:"flex align-items-center justify-content-center mt-5 h-6rem"};var He=e(S,[["render",function(e,l,m,x,b,g){const y=a("Dropdown"),h=a("CopyAddress"),k=a("Button"),w=a("Column"),A=a("DataTable"),T=a("Password"),C=a("AccordionTab"),L=a("Accordion"),j=a("MultiTransListAdd"),S=a("TransactionTransfer");return t(),n("div",null,[s("div",M,[s("div",D,[i(" 1 "),s("div",O,[P,s("div",B,[o(y,{modelValue:x.contractSelect,"onUpdate:modelValue":l[0]||(l[0]=e=>x.contractSelect=e),options:x.contractList,onChange:x.getOwnerAddress,optionLabel:"name",optionValue:"code",placeholder:"선택하세요",class:r(["flex-1 flex w-3 border-round text-blockchain font-medium text-black-alpha-60",[{"p-invalid":x.isSeleted}]])},null,8,["modelValue","options","onChange","class"]),o(h,{address:x.contractSelect,isShow:x.isVisible},null,8,["address","isShow"])])]),i(" 1 "),i(" 2 "),s("div",E,[_,s("div",I,[x.isloading?(t(),n("div",K,N)):(t(),n("div",U,[s("p",R,d(x.ownerAddress),1)]))])]),i(" 2 ")])]),i(" Update Owner "),s("div",F,[s("div",H,[o(L,{activeIndex:0,expandIcon:"pi-chevron-up",collapseIcon:"pi-chevron-down",class:"custom-accordion"},{default:c((()=>[o(C,null,{header:c((()=>[W])),default:c((()=>[s("div",q,[i(" 1 "),s("div",Y,[z,s("div",G,[o(y,{modelValue:x.tokenSelect,"onUpdate:modelValue":l[1]||(l[1]=e=>x.tokenSelect=e),options:x.tokenList,disabled:x.isContractSeleted,onChange:x.getTokenBalance,optionLabel:"name",optionValue:"code",placeholder:"선택하세요",class:r(["flex-1 flex w-3 border-round text-blockchain font-medium text-black-alpha-60",[{"p-invalid":x.isTokenSeleted}]])},null,8,["modelValue","options","disabled","onChange","class"])])]),i(" 1 "),i(" 2 "),s("div",J,[Q,s("div",X,[x.isTokenloading?(t(),n("div",Z,$)):(t(),n("div",ee,[u(s("p",{class:r(["text-xl font-medium",[{"text-error":x.isLessBalance},{"text-black-alpha-80":!x.isLessBalance}]])},[p(d(x.tokenBalance)+" ",1),u(s("i",{onClick:l[2]||(l[2]=(...e)=>x.onRefresh&&x.onRefresh(...e)),class:"pi pi-sync cursor-pointer ml-3"},null,512),[[v,x.isVisible]])],2),[[v,x.isVisible]])]))])]),i(" 2 "),x.isLessBalance?(t(),n("div",le,[s("span",null,d(x.errorMessage),1)])):i("v-if",!0),i(" 2 "),s("div",ae,[te,s("div",ne,[x.isTokenloading?(t(),n("div",se,ie)):(t(),n("div",oe,[s("p",{class:r(["text-xl font-medium",[{"text-error":x.isEmptyAllowance},{"text-black-alpha-60":!x.isEmptyAllowance}]])},d(x.tokenAllowance),3)]))])]),i(" 2 "),x.isEmptyAllowance?(t(),n("div",re,[s("span",null,d(x.errorMessage),1)])):i("v-if",!0),i(" 4 "),s("div",de,[ce,ue,s("div",ve,[o(k,{icon:"pi pi-plus",label:"리스트 추가",onClick:x.addList},null,8,["onClick"])])]),i(" 4 "),i(" 5 "),s("div",pe,[s("div",fe,[o(A,{value:x.datas,rowHover:!0,loading:x.loading1,selection:x.selectedProduct1,"onUpdate:selection":l[3]||(l[3]=e=>x.selectedProduct1=e),selectionMode:"single",dataKey:"count",key:"index",breakpoint:"1080px",responsiveLayout:"stack"},{empty:c((()=>[me,xe,be,ge,ye,he,ke,we,Ae,Te,Ce,Le,je,Se,Ve,Me,De,Oe])),loading:c((()=>[Pe])),footer:c((()=>[s("div",Be,[Ee,s("div",_e,[s("span",Ie,d(x.sumAmount(x.datas)),1)])])])),default:c((()=>[o(w,{field:"count",bodyStyle:"text-align:center",bodyClass:"text-lg",headerStyle:"width: 10%"},{body:c((({index:e})=>[s("span",null,d(e+1),1)])),_:1}),o(w,{field:"address",bodyStyle:"text-align:start",bodyClass:"text-lg",headerStyle:"width: 40%"}),o(w,{field:"amount",bodyStyle:"text-align:end",bodyClass:"text-lg",headerStyle:"width: 40%"},{body:c((({data:e})=>[s("span",null,d(e.amount),1)])),_:1}),o(w,{headerStyle:"width: 10%",bodyStyle:"text-align:center"},{body:c((({data:e})=>[e===x.selectedProduct1?(t(),f(k,{key:0,icon:"pi pi-minus",class:"p-button-rounded p-button-danger",onClick:l=>x.deleteProduct(e)},null,8,["onClick"])):i("v-if",!0)])),_:1})])),_:1},8,["value","loading","selection"])])]),i(" 5 "),i(" 3 "),s("div",Ke,[Ne,s("div",Ue,[o(T,{modelValue:x.privateKey,"onUpdate:modelValue":l[4]||(l[4]=e=>x.privateKey=e),class:r(["w-full",[{"p-invalid":x.isPrivatekey}]]),feedback:!1,placeholder:"비공개키 입력할때는 보안에 주의하세요",inputStyle:"width: 100%",toggleMask:""},null,8,["modelValue","class"])]),s("div",Re,[u(s("span",null,d(x.errorMessage),513),[[v,x.isPrivatekey]])])]),i(" 3 "),i(" 6 "),s("div",Fe,[o(k,{label:"전송",class:"px-7",onClick:x.doMultiTransfer},null,8,["onClick"])]),i(" 6 ")])])),_:1})])),_:1})])]),i(" Update Owner "),o(j,{onAddDataAction:x.addDataList},null,8,["onAddDataAction"]),o(S,{onDialogAction:x.closed},null,8,["onDialogAction"])])}],["__scopeId","data-v-37fedb72"],["__file","D:/2022/6.profile/jeffkim22/src/views/ethereum/tokenMultiTransfer/MultiTransmission.vue"]]);export{He as default};
